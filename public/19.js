(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{219:function(t,e,a){"use strict";a.r(e);var n={data:function(){return{banks:[],bank:{account_code:""},dialog_title:"Almacenar Cuenta Bancaria",dialog_icon:"mdi-content-save",currencies:[],loading:!1,searching:!1,dialog:!1,saving:!1,search:"",type:1,bankHeaders:[{text:"id",align:"right",value:"id"},{text:"Nombre del Banco",align:"right",value:"bank_name"},{text:"Titular de la cuenta",align:"right",value:"account_holder"},{text:"Moneda de Uso",align:"right",value:"currency_id"},{text:"Fecha de Registro",align:"right",value:"created_at"},{text:"Opciones",value:"actions",sortable:!1}]}},computed:{account_code:function(){return!!this.bank.account_code}},methods:{getBanks:function(){var t=this;t.loading=!0,axios.get("/api/banks").then((function(e){t.banks=e.data.banks})).catch((function(t){console.log(t.data)})).finally(t.loading=!1)},getCurrencies:function(){var t=this;axios.get("/api/currencies").then((function(e){t.currencies=e.data.currencies})).catch((function(t){console.log(t.data)}))},showDialog:function(t,e){var a=this;1==t?(a.bank={},a.dialog_icon="mdi-content-save"):(a.dialog_title="Modificar Cuenta Bancaria",a.bank=e,a.dialog_icon="mdi-update"),a.type=t,a.dialog=!0},closeDialog:function(){var t=this;t.dialog_title="Almacenar Cuenta Bancaria",t.bank={},t.dialog=!1,t.type=1,t.dialog_icon="mdi-content-save"},createBank:function(){var t=this;t.validateBank()||(t.saving=!0,axios.post("/api/banks/store",t.bank).then((function(e){t.getBanks(),t.closeDialog(),t.alert(1,e.data.message)})).catch((function(e){if(422==e.response.status){for(var a="",n=e.response.data.errors,i=0,o=Object.keys(n);i<o.length;i++){a=a+". "+n[o[i]].flat()}t.alert(4,a)}})).finally((function(){return t.saving=!1})))},updateBank:function(t){var e=this;e.validateBank()||(e.saving=!0,t._method="put",axios.post("/api/banks/update/"+t.id,t).then((function(t){e.getBanks(),e.closeDialog(),e.alert(1,t.data.message)})).catch((function(t){if(422==t.response.status){for(var a="",n=t.response.data.errors,i=0,o=Object.keys(n);i<o.length;i++){a=a+". "+n[o[i]].flat()}e.alert(4,a)}})).finally((function(){return e.saving=!1})))},activeBank:function(t){var e=this,a={url:"/api/banks/activate/"+t,title:"Habilitar Banco?",active:1};Sfire.activeF(a).then((function(t){e.getBanks(),e.alert(1,t)})).catch((function(t){e.alert(4,t)}))},desactiveBank:function(t){var e=this,a={url:"/api/banks/desactive/"+t,title:"Inhabilitar Banco?",active:0};Sfire.desactiveF(a).then((function(t){e.getBanks(),e.alert(1,t)})).catch((function(t){e.alert(4,t)}))},deleteBank:function(t){var e=this,a={url:"/api/banks/destroy/"+t,title:"Suprimir Banco?",active:1};Sfire.deleteF(a).then((function(t){e.getBanks(),e.alert(1,t)})).catch((function(t){e.alert(4,t)}))},validateBank:function(){var t=this;return t.errorSmsS=0,t.errorSmsListS=[],t.bank.bank_name||t.errorSmsListS.push("El nombre del Banco es Requerido"),t.bank.account_holder||t.errorSmsListS.push("Nos Falta el Titular de la cuenta."),t.bank.account_code||t.errorSmsListS.push("Necesitamos el codigo de la cuenta."),t.bank.currency_id||t.errorSmsListS.push("Seleccione el Pais del Banco."),t.errorSmsListS.length&&(t.errorSmsS=1),t.errorSmsListS.length>=1&&Swal.fire({title:"Hey!! Nos falta(n) Datos",icon:"info",confirmButtonText:"Aceptar!",confirmButtonColor:"#3085d6",html:"".concat(t.errorSmsListS.map((function(t){return'<br><span style="color:red;" class="mb-3"><i class="mdi mdi-minus-circle-outline mdi-spin mr-3"></i> '.concat(t,"</span>")}))),showCancelButton:!1}),t.errorSmsS},alert:function(t,e){this.$refs.Alerts.showAlert(t,e)}},mounted:function(){this.getBanks(),this.getCurrencies()}},i=a(0),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{id:"regular-tables",fluid:"",tag:"section"}},[a("base-material-card",{staticClass:"px-5 py-3",attrs:{icon:"mdi-clipboard-text",title:"Lista Bancos"}},[a("alerts",{ref:"Alerts"}),t._v(" "),a("div",{staticClass:"text-center"},[a("v-row",[a("v-col",{attrs:{cols:"9",md:"3"}},[a("v-card",{staticClass:"my-0",attrs:{color:"teal",outlined:"",rounded:""}},[a("v-list",{staticClass:"my-0"},[a("v-list-item",{attrs:{link:""},on:{click:function(e){return t.showDialog(t.type=1,t.bank={})}}},[a("v-list-item-avatar",[a("v-icon",{attrs:{large:"",color:"teal"}},[t._v("mdi-bank-plus")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",{attrs:{color:"teal"},domProps:{textContent:t._s("Registrar Cuenta +")}})],1)],1)],1)],1)],1),t._v(" "),a("v-col",[a("v-text-field",{attrs:{color:"orange",filled:"","append-icon":"mdi-book-search-outline",label:"Ubicar Cuenta Bancaria","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-2",attrs:{search:t.search,headers:t.bankHeaders,items:t.banks,loading:t.loading,"items-per-page":20,"no-results-text":"No hay Coincidencias","no-data-text":"No hay Bancos Guardados"},scopedSlots:t._u([{key:"item.currency_id",fn:function(e){var n=e.item;return[n.currency?a("div",[t._v(" "+t._s(n.currency.name))]):t._e()]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{staticClass:"ma-1 white--text",attrs:{color:"orange darken-4","x-small":"",filled:"",outlined:"",rounded:"","elevation-4":""},on:{click:function(e){return t.showDialog(t.dialog_type=2,n)}}},[t._v("\n                        Modificar\n                        "),a("v-icon",{attrs:{right:"",small:"",light:""}},[t._v("mdi-book-edit-outline")])],1),t._v(" "),1==n.active?a("v-btn",{staticClass:"ma-1",attrs:{color:"warning","x-small":"",outlined:"",rounded:"",filled:"","elevation-4":""},on:{click:function(e){return t.desactiveBank(n.id)}}},[t._v("\n                        Inhabilitar\n                        "),a("v-icon",{attrs:{small:"",right:"",light:""}},[t._v("mdi-book-off")])],1):t._e(),t._v(" "),0==n.active?a("v-btn",{staticClass:"ma-1 white--text",attrs:{color:"cyan darken-4","x-small":"",outlined:"",rounded:"",filled:"","elevation-4":""},on:{click:function(e){return t.activeBank(n.id)}}},[t._v("\n                        Habilitar\n                        "),a("v-icon",{attrs:{small:"",right:"",light:""}},[t._v("mdi-check-circle-outline")])],1):t._e(),t._v(" "),a("v-btn",{staticClass:"ma-1 white--text",attrs:{color:"red darken-3","x-small":"",outlined:"",rounded:"",filled:"","elevation-4":"",disabled:3==n.active||1==n.active},on:{click:function(e){return t.deleteBank(n.id)}}},[t._v("\n                        Eliminar\n                        "),a("v-icon",{attrs:{small:"",right:"",light:""}},[t._v(" mdi-close-outline ")])],1)]}}])})],1),t._v(" "),a("v-row",{staticClass:"mx-2",attrs:{"justify-center":""}},[a("v-dialog",{attrs:{cols:"8",width:"65%",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"orange white--text display-2 darken-4"},[a("v-icon",[t._v(t._s(t.dialog_icon))]),t._v("\n                        "+t._s(t.dialog_title)+"\n                    ")],1),t._v(" "),a("v-container",[a("v-row",{staticClass:"mx-2"},[a("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Introduzca Nombre Del Banco",type:"text",required:"",outlined:"",clearable:"",dense:"",color:"deep-purple",cols:"12",md:"6","prepend-outer-icon":"mdi-bank-plus"},model:{value:t.bank.bank_name,callback:function(e){t.$set(t.bank,"bank_name",e)},expression:"bank.bank_name"}})],1),t._v(" "),a("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{type:"text",color:"deep-purple",placeholder:"**** **** **** **** ***",label:"ingrese Numero de cuenta",outlined:"",clearable:"",dense:"","prepend-outer-icon":"mdi-account-box-multiple-outline"},model:{value:t.bank.account_code,callback:function(e){t.$set(t.bank,"account_code",e)},expression:"bank.account_code"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.account_code,expression:"!account_code"}],staticClass:"primary"},[t._v("Inserte numero de Cuenta!")])],1),t._v(" "),a("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{type:"text",color:"deep-purple",label:"Insertar Nombre del titular de la Cuenta",outlined:"",clearable:"",dense:"","prepend-outer-icon":"mdi-account-box-multiple-outline"},model:{value:t.bank.account_holder,callback:function(e){t.$set(t.bank,"account_holder",e)},expression:"bank.account_holder"}})],1),t._v(" "),a("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12",md:"4"}},[a("v-autocomplete",{attrs:{clearable:"",color:"deep-purple",outlined:"",dense:"",items:t.currencies,"item-text":"name","item-value":"id",label:"Pais de la Cuenta","prepend-outer-icon":"mdi-book-marker-outline"},model:{value:t.bank.currency_id,callback:function(e){t.$set(t.bank,"currency_id",e)},expression:"bank.currency_id"}})],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{on:{click:function(e){return t.closeDialog()}}},[t._v(" Cancelar")]),t._v(" "),1==t.type?a("v-btn",{attrs:{text:"",color:"orange darken-4",loading:t.saving,right:""},on:{click:function(e){return t.createBank(t.bank)}}},[t._v("Guardar Cuenta "),a("v-icon",[t._v("mdi-content-save")])],1):t._e(),t._v(" "),2==t.type?a("v-btn",{attrs:{text:"",color:"orange darken-4",loading:t.saving,right:""},on:{click:function(e){return t.updateBank(t.bank)}}},[t._v("Actualizar Datos "),a("v-icon",{attrs:{color:"white"}},[t._v("mdi-update")])],1):t._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=o.exports}}]);