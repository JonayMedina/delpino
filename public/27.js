(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{218:function(e,t,r){"use strict";r.r(t);var a={data:function(){return{currencies:[],currency:{},loading:!1,search:"",dialog_title:"",dialog:!1,dialog_type:1,saving:"",headers:[{text:"Nombre de Moneda",align:"right",value:"name"},{text:"Codigo Iso",align:"right",value:"iso"},{text:"Simbolo",align:"right",value:"symbol"},{text:"Opciones",value:"actions",sortable:!1}]}},methods:{getCurrencies:function(){var e=this;axios.get("/api/currencies").then((function(t){e.currencies=t.data.currencies})).catch((function(e){console.log(e)}))},showDialog:function(e,t){var r=this;1==e?(r.dialog_title="Guardar Monto",r.currency={}):(r.dialog_title="Actualizar Monto",r.currency=t),r.dialog=!0},createCurrency:function(){var e=this;e.validateCurrency()||(e.saving=!0,axios.post("/api/currencies/store",e.currency).then((function(t){e.getCurrencies(),e.closeDialog(),e.alert(1,t.data.message)})).catch((function(t){if(422==t.response.status){for(var r="",a=t.response.data.errors,n=0,c=Object.keys(a);n<c.length;n++){r=r+". "+a[c[n]].flat()}e.alert(4,r)}})).finally((function(){return e.saving=!1})))},updateCurrency:function(){var e=this;e.validateCurrency()||(e.currency._method="PUT",e.saving=!0,axios.post("/api/currencies/update/"+e.currency.id,e.currency).then((function(t){e.getCurrencies(),e.closeDialog(),e.alert(1,t.data.message)})).catch((function(t){if(422==t.response.status){for(var r="",a=t.response.data.errors,n=0,c=Object.keys(a);n<c.length;n++){r=r+". "+a[c[n]].flat()}e.alert(4,r)}})).finally((function(){return e.saving=!1})))},closeDialog:function(){this.dialog_title="Registrar Moneda",this.currency={},this.dialog=!1},activeCurrency:function(e){var t=this,r={url:"/api/currencies/activate/"+e,title:"Activar Moneda?",active:1};Sfire.activeF(r).then((function(e){t.getCurrencies(),t.alert(1,e)})).catch((function(e){t.alert(4,e)}))},desactiveCurrency:function(e){var t=this,r={url:"/api/currencies/desactive/"+e,title:"Desactivar Moneda?",active:0};Sfire.desactiveF(r).then((function(e){t.getCurrencies(),t.alert(1,e)})).catch((function(e){t.alert(4,e)}))},deleteCurrency:function(e){var t=this,r={url:"/api/currencies/activate/"+e,title:"BORRAR Moneda?",active:1};Sfire.activeS(r).then((function(e){t.getCurrencies(),t.alert(1,e)})).catch((function(e){t.alert(4,e)}))},validateCurrency:function(){var e=this;return e.errorSmsS=0,e.errorSmsListS=[],e.currency.name||e.errorSmsListS.push("Por favor Ingrese el nombre de la moneda"),e.currency.iso||e.errorSmsListS.push("Por favor Inserte Codigo ISO ejemplo 'USD, EUR, COP'"),e.currency.locale||e.errorSmsListS.push("Por favor Inserte Codigo Locale ejemplo 'en-US, es-ES, es-CO'"),e.currency.symbol||e.errPayL.push("Por favor Ingrese simbolo de la moneda ejemplo: ' â‚¬, $' "),e.errorSmsListS.length&&(e.errorSmsS=1),e.errorSmsListS.length>=1&&Swal.fire({title:"Hey!! Nos falta(n) Datos",icon:"info",confirmButtonText:"Aceptar!",confirmButtonColor:"#3085d6",html:"".concat(e.errorSmsListS.map((function(e){return'<br><span style="color:red;" class="mb-3"><i class="mdi mdi-minus-circle-outline mdi-spin mr-3"></i> '.concat(e,"</span>")}))),showCancelButton:!1}),e.errorSmsS},alert:function(e,t){this.$refs.Alerts.showAlert(e,t)}},mounted:function(){this.getCurrencies()}},n=r(0),c=Object(n.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{id:"currencies",fluid:"",tag:"section"}},[r("base-v-component",{attrs:{heading:"Lisado de Monedas",link:"Monedas/listado"}}),e._v(" "),r("base-material-card",{staticClass:"px-3 py-2",attrs:{icon:"mdi-clipboard-text",title:"Tabla de Monedas"}},[r("alerts",{ref:"Alerts"}),e._v(" "),r("div",{staticClass:"text-center"},[r("v-row",[r("v-col",{attrs:{cols:"2"}},[r("v-btn",{attrs:{elevation:"5",icon:"",large:""},on:{click:function(t){return e.showDialog(e.dialog_type=1,e.currency={})}}},[r("v-icon",{attrs:{color:"orange"}},[e._v("mdi-cash-plus")])],1)],1),e._v(" "),r("v-col",[r("v-text-field",{attrs:{outlined:"",clearable:"",color:"orange","append-icon":"mdi-image-search",label:"Buscar Moneda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),e._v(" "),r("v-data-table",{staticClass:"elevation-2",attrs:{search:e.search,headers:e.headers,items:e.currencies,loading:"true","items-per-page":20},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[r("v-btn",{staticClass:"ma-1 white--text",attrs:{color:"orange darken-4",medium:"",filled:"","elevation-4":""},on:{click:function(t){return e.showDialog(e.dialog_type=2,a)}}},[e._v("\n                        Editar\n                        "),r("v-icon",{attrs:{right:"",small:"",dark:""}},[e._v("mdi-book-edit-outline")])],1),e._v(" "),1==a.active?r("v-btn",{staticClass:"ma-1",attrs:{color:"",medium:"",filled:"","elevation-4":""},on:{click:function(t){return e.desactiveCurrency(a.id)}}},[e._v("\n                        Colocar Inactivo\n                        "),r("v-icon",{attrs:{medium:"",right:"",light:""}},[e._v("mdi-book-off")])],1):e._e(),e._v(" "),0==a.active?r("v-btn",{staticClass:"ma-1 white--text",attrs:{color:"blue darken-2",medium:"",filled:"","elevation-4":""},on:{click:function(t){return e.activeCurrency(a.id)}}},[e._v("\n                        Colocar Activo\n                        "),r("v-icon",{attrs:{small:"",right:"",dark:""}},[e._v("mdi-check-circle-outline")])],1):e._e(),e._v(" "),r("v-btn",{staticClass:"ma-1 white--text",attrs:{color:"deep-red",medium:"",filled:"","elevation-4":"",disabled:3==a.active||1==a.active},on:{click:function(t){return e.deleteCurrency(a.id)}}},[e._v("\n                        Eliminar\n                        "),r("v-icon",{attrs:{small:"",right:"",dark:""}},[e._v(" mdi-close-outline ")])],1)]}}])})],1),e._v(" "),r("v-row",{staticClass:"mx-2"},[r("v-dialog",{attrs:{cols:"10"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"grey darken-2",domProps:{textContent:e._s("Editar Moneda")}}),e._v(" "),r("v-container",[r("v-row",{staticClass:"mx-2"},[r("v-col",{staticClass:"align-center justify-space-between",attrs:{cols:"12"}},[r("v-row",{staticClass:"mr-0",attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{type:"text",color:"deep-purple",required:"",outlined:"",clearable:"",dense:"",label:"Ingrese Nombre de Moneda","prepend-outer-icon":"mdi-cash-check"},model:{value:e.currency.name,callback:function(t){e.$set(e.currency,"name",t)},expression:"currency.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{type:"text",color:"deep-purple",required:"",outlined:"",clearable:"",dense:"",label:"Ingrese Codigo ISO ejemp: 'USD'","prepend-outer-icon":"mdi-cash-check"},model:{value:e.currency.iso,callback:function(t){e.$set(e.currency,"iso",t)},expression:"currency.iso"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{type:"text",color:"deep-purple",required:"",outlined:"",clearable:"",dense:"",label:"Codigo Locale: 'en-US'","prepend-outer-icon":"mdi-cash-check"},model:{value:e.currency.locale,callback:function(t){e.$set(e.currency,"locale",t)},expression:"currency.locale"}})],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{type:"text",color:"deep-purple",required:"",outlined:"",clearable:"",dense:"","prepend-icon":"mdi-account-card-details-outline",placeholder:"Ingrese simbolo ejemp: '$' "},model:{value:e.currency.notes,callback:function(t){e.$set(e.currency,"notes",t)},expression:"currency.notes"}})],1)],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dialog=!1}}},[e._v(" Cancelar")]),e._v(" "),1==e.dialog_type?r("v-btn",{attrs:{text:""},on:{click:function(t){return e.createCurrency(e.currency)}}},[e._v("Guardar")]):e._e(),e._v(" "),2==e.dialog_type?r("v-btn",{attrs:{text:""},on:{click:function(t){return e.updateCurrency()}}},[e._v("Actualizar")]):e._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);