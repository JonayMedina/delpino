(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{240:function(e,n,t){"use strict";t.r(n);var a={data:function(){return{pay:{},detail_pay:[],prices:[],dialog_title:"Agregar datos de cuenta",banks:[],receivers:[],receiver:{},total_pay:0,remaining:0,remaining_text:"Restante",step:1,turn:0,saving:!1,min:"",dialog:!1,valid_modal:!1,disable_pay:!0,emodal:0,emodalList:[],epay:0,epayList:[],price:{},amount_paied:0,modalRules:[],bankDisabled:!0,registerDisabled:!1,payErrors:{},pmoney:{value:"",placeholder:"Ingrese Monto depositado",readonly:!1,disabled:!1,outlined:!0,clearable:!0,valueWhenIsEmpty:"",options:{locale:"en-US",prefix:"",currency:"USD",suffix:"",length:20,precision:2},properties:{hint:"Ingrese Monto"}},vmoney:{value:"0.00",placeholder:" ",readonly:!1,disabled:!1,outlined:!0,clearable:!0,valueWhenIsEmpty:"",options:{locale:"es-Ve",prefix:"",currency:"VES",suffix:"",length:20,precision:2},properties:{hint:"Ingrese Monto"}}}},computed:{width:function(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"90%";case"md":return"70%";case"lg":return"60%";case"xl":return"50%"}},register:function(){this.pay.amount&&this.receivers.length}},methods:{getPrices:function(){var e=this;axios.get("/api/prices").then((function(n){e.prices=n.data.prices})).catch((function(e){console.log(e)}))},getBanks:function(e){var n=this;axios.get("/api/banks/by-currency/"+e).then((function(e){n.banks=e.data.banks,n.bankDisabled=!1})).catch((function(e){console.log(e)}))},setPrice:function(e){var n=this;n.bankDisabled=!0,n.pay.price_rate=e.amount,n.disable_pay=!1,n.pay.pay_iso=e.iso,n.pay.currency_id=e.currency_id,n.pmoney.options.currency=e.iso,n.pmoney.options.locale=e.locale,n.getBanks(e.currency_id),n.total_pay&&n.setRemaining()},addReceiver:function(e){var n=this;n.validateReceiver()||(n.find(e.bank_account)?Swal.fire({icon:"error",title:"Error...",text:"Cuenta ya agregada!.",footer:"Guardar pago o Seguir Agregando?."}):(n.receivers.push({bank_account:e.bank_account,bank_name:e.bank_name,name:e.name,dni:e.dni,amount:e.amount,description:""}),n.decreaseRemaining(e.amount),n.closeDialog()))},createPay:function(){var e=this;e.pay.detail_pay=e.receivers,e.validatePay()||(e.saving=!0,axios.post("/api/payments/store",e.pay).then((function(n){Swal.fire({position:"top-end",icon:"success",title:"".concat(n.data.message),timer:3e3}),e.$router.push({name:"payments"})})).catch((function(n){422==n.response.status?e.payErrors=n.response.data.errors:console.log(n)})).finally((function(){return e.saving=!1})))},validatePay:function(){var e=this;return e.epay=0,e.epayList=[],e.pay.price_rate||e.epayList.push("Seleccione Moneda de Remesa."),e.pay.bank_id||e.epayList.push("Seleccione un Banco"),e.pay.pay||e.epayList.push("Se necesita el Monto Depositado."),e.remaining>0&&e.epayList.push("Asigne el monto Calculado a algún Beneficiario."),0==e.pay.detail_pay.length&&e.epayList.push("Ingrese algún Beneficiario."),e.epayList.length&&(e.epay=1),e.epayList.length>=1&&Sfire.validateF(e.epayList),e.epay},validateReceiver:function(){var e=this;return e.emodal=0,e.emodalList=[],e.receiver.amount||e.emodalList.push("Ingrese un Monto"),e.receiver.amount>e.reminder&&e.emodalList.push("Monto superior a su total disponible"),e.receiver.bank_account||e.emodalList.push("Ingrese Cuenta"),e.receiver.bank_account&&(e.receiver.bank_account.length<20||e.receiver.bank_account.length>20)&&e.emodalList.push("Ingrese Cuenta Correctamente"),e.receiver.name||e.emodalList.push("Ingrese Nombre de Beneficiario"),e.receiver.dni||e.emodalList.push("Ingrese C.i. del Beneficiario"),e.emodalList.length&&(e.emodal=1),e.emodalList.length>=1&&Sfire.validateF(e.emodalList),e.emodal},find:function(e){var n=0;return this.receivers&&(n=this.receivers.some((function(n){return n.bank_account==e}))),n},deleteReceiver:function(e,n){var t=this.receivers.splice(e,1);console.log(t),this.increaseReaming(t[0].amount)},openDialog:function(){this.dialog=!0,this.receiver.amount=this.remaining},clearDialog:function(){this.receiver={}},closeDialog:function(){this.receiver={},this.dialog=!1},setRemaining:function(){this.total_pay=this.pay.pay*this.pay.price_rate,this.remaining=this.pay.pay*this.pay.price_rate},decreaseRemaining:function(e){this.remaining=this.remaining-e},increaseReaming:function(e){this.remaining+=parseFloat(e)},moneyFormat:function(e){return Sfire.moneyFormatF(e)}},mounted:function(){this.getPrices()}},o=(t(95),t(0)),i=Object(o.a)(a,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-layout",{attrs:{row:"",wrap:""}},[t("v-container",{attrs:{id:"regular-tables",fluid:"",tag:"section"}},[t("base-material-card",{staticClass:"px-5 py-3",attrs:{icon:"mdi-file-plus-outline",title:"Nuevo Pago"}},[t("v-card",{attrs:{height:"100%"}},[e.payErrors?t("error-component",{attrs:{errors:e.payErrors}}):e._e(),e._v(" "),t("v-row",{staticClass:"mx-2"},[t("v-col",{attrs:{cols:"12"}},[t("v-card-text",{attrs:{"elevation-2":""}},[e._v("\n                                Orden de Selecion: "),t("span",{staticClass:"red--text text--darken-4"},[t("v-icon",[e._v("mdi-information-variant")]),e._v(" Seleccione Moneda de Remesa,\n                                "),t("v-icon",[e._v("mdi-information-variant")]),e._v(" Luego El Banco donde Deposito,\n                                "),t("v-icon",[e._v("mdi-information-variant")]),e._v(" Inserte el monto de Remesa y\n                                "),t("v-icon",[e._v("mdi-information-variant")]),e._v(" Luego agrege los datos del (Los) Beneficiario(s). ")],1)])],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-select",{attrs:{items:e.prices,"menu-props":"auto",label:"Seleccione una Moneda","hide-details":"","prepend-icon":"mdi-map","single-line":"","return-object":""},on:{change:function(n){return e.setPrice(e.price)}},scopedSlots:e._u([{key:"selection",fn:function(n){var t=n.item;return[e._v("\n                                    "+e._s(t.amount_formated)+" "+e._s(t.iso)+"\n                                ")]}},{key:"item",fn:function(n){var t=n.item;return[e._v("\n                                    "+e._s(t.amount_formated)+" "+e._s(t.iso)+"\n                                ")]}}]),model:{value:e.price,callback:function(n){e.price=n},expression:"price"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-select",{attrs:{items:e.banks,"menu-props":"auto",label:"Seleccione un Banco","hide-details":"","item-value":"id",disabled:e.bankDisabled,"prepend-icon":"mdi-bank-check","single-line":""},scopedSlots:e._u([{key:"selection",fn:function(n){var t=n.item;return[e._v("\n                                    "+e._s(t.bank_name)+" "+e._s(t.account_code)+"\n                                ")]}},{key:"item",fn:function(n){var t=n.item;return[e._v("\n                                    "+e._s(t.bank_name)+" "+e._s(t.account_code)+"\n                                ")]}}]),model:{value:e.pay.bank_id,callback:function(n){e.$set(e.pay,"bank_id",n)},expression:"pay.bank_id"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"6"}},[t("v-text-field",{attrs:{label:"Numero de Operacion",type:"text",required:"",outlined:"",clearable:"",dense:"",color:"deep-purple","prepend-icon":"mdi-numeric"},model:{value:e.pay.operation_code,callback:function(n){e.$set(e.pay,"operation_code",n)},expression:"pay.operation_code"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"6"}},[t("money",{attrs:{color:"deep-purple",label:"Insertar Monto",outlined:e.pmoney.outlined,clearable:!0,dense:e.pmoney.outlined,placeholder:e.pmoney.placeholder,readonly:e.pmoney.readonly,disabled:e.disable_pay,valueWhenIsEmpty:e.pmoney.valueWhenIsEmpty,options:e.pmoney.options,properties:e.pmoney.properties,"prepend-outer-icon":"mdi-bank-plus"},on:{"update:options":function(n){return e.$set(e.pmoney,"options",n)},input:function(n){return e.setRemaining()}},model:{value:e.pay.pay,callback:function(n){e.$set(e.pay,"pay",n)},expression:"pay.pay"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"6"}},[t("money",{attrs:{color:"deep-purple",label:"Restante en Bs",outlined:e.vmoney.outlined,clearable:!0,dense:e.vmoney.outlined,placeholder:e.remaining_text,readonly:!0,disabled:!0,valueWhenIsEmpty:e.vmoney.valueWhenIsEmpty,options:e.vmoney.options,properties:e.vmoney.properties,"prepend-outer-icon":"mdi-cash-plus"},on:{"update:options":function(n){return e.$set(e.vmoney,"options",n)}},model:{value:e.remaining,callback:function(n){e.remaining=n},expression:"remaining"}})],1),e._v(" "),t("v-banner",[e._v("\n                            Agrega Destinatario(s) en la lista\n                                "),t("v-btn",{attrs:{"elevation-5":"",color:"deep-purple accent-4",disabled:!e.remaining},on:{click:function(n){return e.openDialog()}}},[e._v("\n                                    Agregar Destinatario\n                                ")]),e._v(" "),t("money",{attrs:{color:"deep-purple",label:"Total en Bs",outlined:e.vmoney.outlined,clearable:!0,dense:e.vmoney.outlined,placeholder:"Total Calculado",readonly:!0,disabled:!0,valueWhenIsEmpty:e.vmoney.valueWhenIsEmpty,options:e.vmoney.options,properties:e.vmoney.properties,"prepend-outer-icon":"mdi-cash-plus"},on:{"update:options":function(n){return e.$set(e.vmoney,"options",n)}},model:{value:e.total_pay,callback:function(n){e.total_pay=n},expression:"total_pay"}})],1)],1),e._v(" "),t("v-card-text",{directives:[{name:"show",rawName:"v-show",value:e.receivers,expression:"receivers"}]},[t("v-simple-table",{attrs:{"fixed-header":""},scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-center"},[e._v("Eliminar")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                                            Nombre\n                                        ")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                                            C.I/D.N.I.\n                                        ")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                                            Banco\n                                        ")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                                            Cuenta\n                                        ")]),e._v(" "),t("th",{staticClass:"text-center"},[e._v("\n                                            Monto\n                                        ")]),e._v(" "),t("th",[e._v("Acciones")])])]),e._v(" "),t("tbody",e._l(e.receivers,(function(n,a){return t("tr",{key:n.name},[t("td",{staticClass:"text-center"},[t("v-icon",{attrs:{size:"40",color:"red"},on:{click:function(t){return e.deleteReceiver(a,n)}}},[e._v("mdi-delete-forever-outline")])],1),e._v(" "),t("td",[e._v(e._s(n.name))]),e._v(" "),t("td",[e._v(e._s(n.dni))]),e._v(" "),t("td",[e._v(e._s(n.bank_name))]),e._v(" "),t("td",[e._v(e._s(n.bank_account))]),e._v(" "),t("td",[e._v(e._s(e.moneyFormat(n.amount)))])])})),0)]},proxy:!0}])})],1),e._v(" "),t("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.receivers,expression:"receivers"}]},[t("router-link",{attrs:{to:{name:"payments"}}},[t("v-btn",{attrs:{medium:"",filled:"","elevation-4":"",color:"blue-grey"}},[e._v(" Cancelar")])],1),e._v(" "),t("v-btn",{attrs:{medium:"",outlined:"","elevation-4":"",color:"orange darken-4",loading:e.saving,disabled:e.registerDisabled,right:""},on:{click:function(n){return e.createPay()}}},[e._v("Registrar\n                        ")])],1)],1)],1)],1),e._v(" "),t("div",[t("v-row",[t("v-dialog",{attrs:{width:e.width,"hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("v-card",{attrs:{tile:""}},[t("v-toolbar",{staticClass:"mb-2",attrs:{flat:"",dark:"",color:"orange darken-4"}},[t("v-btn",{attrs:{icon:""},on:{click:function(n){e.dialog=!1}}},[t("v-icon",[e._v("mdi-close")])],1),e._v(" "),t("v-toolbar-title",[e._v("Agregar Pago")]),e._v(" "),t("v-spacer"),e._v("\n                            Disponible\n                            "),t("v-row",[t("v-col",{staticClass:"mt-4"},[t("money",{attrs:{dark:!0,"background-color":"orange darken-4",whiteText:!0,label:"Restante en Bs",outlined:e.vmoney.outlined,clearable:!0,dense:e.vmoney.outlined,placeholder:e.remaining_text,readonly:!0,disabled:!0,valueWhenIsEmpty:e.vmoney.valueWhenIsEmpty,options:e.vmoney.options,properties:e.vmoney.properties,"prepend-outer-icon":"mdi-cash-plus"},on:{"update:options":function(n){return e.$set(e.vmoney,"options",n)}},model:{value:e.remaining,callback:function(n){e.remaining=n},expression:"remaining"}})],1)],1)],1),e._v(" "),t("v-card-text",[t("v-row",{staticClass:"mx-2"},[t("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"Introduzca Nombre Completo de Quien recibe",type:"text",required:"",outlined:"",clearable:"",dense:"",color:"deep-purple","prepend-outer-icon":"mdi-account"},model:{value:e.receiver.name,callback:function(n){e.$set(e.receiver,"name",n)},expression:"receiver.name"}})],1),e._v(" "),t("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"Introduzca Cedula",type:"text",required:"",outlined:"",clearable:"",dense:"",color:"deep-purple","prepend-outer-icon":"mdi-account"},model:{value:e.receiver.dni,callback:function(n){e.$set(e.receiver,"dni",n)},expression:"receiver.dni"}})],1),e._v(" "),t("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12"}},[t("v-text-field",{attrs:{type:"text",color:"deep-purple",label:"Insertar Cuenta Beneficiaria ",outlined:"",clearable:"",dense:"",min:"20",max:"20",counter:"20","prepend-outer-icon":"mdi-bank-plus"},model:{value:e.receiver.bank_account,callback:function(n){e.$set(e.receiver,"bank_account",n)},expression:"receiver.bank_account"}})],1),e._v(" "),t("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12"}},[t("v-text-field",{attrs:{type:"text",color:"deep-purple",label:"Insertar Nombre del Banco",outlined:"",clearable:"",dense:"","prepend-outer-icon":"mdi-bank-plus"},model:{value:e.receiver.bank_name,callback:function(n){e.$set(e.receiver,"bank_name",n)},expression:"receiver.bank_name"}})],1),e._v(" "),t("v-col",{staticClass:"pt-0 pl-0",attrs:{cols:"12"}},[t("money",{attrs:{color:"deep-purple",label:"Insertar Monto| Total Disponible Pre-Cargado",outlined:e.vmoney.outlined,clearable:!0,dense:e.vmoney.outlined,placeholder:e.vmoney.placeholder,readonly:e.vmoney.readonly,disabled:e.vmoney.disabled,valueWhenIsEmpty:e.vmoney.valueWhenIsEmpty,options:e.vmoney.options,properties:e.vmoney.properties,"prepend-outer-icon":"mdi-bank-plus"},model:{value:e.receiver.amount,callback:function(n){e.$set(e.receiver,"amount",n)},expression:"receiver.amount"}})],1)],1),e._v(" "),t("v-divider")],1),e._v(" "),t("div",{staticStyle:{flex:"1 1 auto"}}),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{outlined:"",color:"orange darken-4","elevation-4":""},on:{click:function(n){return e.addReceiver(e.receiver)}}},[e._v("\n                                Agregar Cuenta\n                            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);n.default=i.exports},42:function(e,n,t){var a=t(96);"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(4)(a,o);a.locals&&(e.exports=a.locals)},95:function(e,n,t){"use strict";t(42)},96:function(e,n,t){(e.exports=t(3)(!1)).push([e.i,".v-col,.v-stepper--vertical .v-stepper__content{padding-top:0}",""])}}]);